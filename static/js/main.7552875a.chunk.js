(this.webpackJsonpchat_app=this.webpackJsonpchat_app||[]).push([[0],{25:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var s=a(5),c=a(19),o=a.n(c),n=a(10),r=(a(25),a(11)),i=r.a.initializeApp({apiKey:"AIzaSyBK2LntkUvYMH2NH00AHbydIoaYpMV5cS4",authDomain:"chat-app-9a401.firebaseapp.com",projectId:"chat-app-9a401",storageBucket:"chat-app-9a401.appspot.com",messagingSenderId:"152940242080",appId:"1:152940242080:web:c48c8d04b16e8d8465d5c5",measurementId:"G-NFJ4WKEJBE"}),l=i.firestore(),d=i.auth(),u=a(2);var b=function(){return Object(u.jsx)("div",{className:"SignIn",children:Object(u.jsx)("button",{onClick:function(){var e=new r.a.auth.GoogleAuthProvider;d.signInWithPopup(e)},children:"Sign In With Google"})})},f=a(20),j=a(13),m=a.n(j),p=a(14);var y=function(e){var t=Object(s.useState)(""),a=Object(n.a)(t,2),c=a[0],o=a[1];function i(){return(i=Object(p.a)(m.a.mark((function t(a){var s,n,i,u,b;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===c){t.next=6;break}return a.preventDefault(),s=d.currentUser,n=s.uid,i=s.photoURL,u=s.email,b=s.displayName,t.next=5,l.collection(e.database).add({text:c,photoURL:i,uid:n,email:u,displayName:b,createdAt:r.a.firestore.FieldValue.serverTimestamp()});case 5:o("");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(u.jsx)("div",{onSubmit:function(e){return i.apply(this,arguments)},children:Object(u.jsxs)("form",{children:[Object(u.jsx)("input",{className:"SendMsg",type:"text",value:c,placeholder:"Message..",onChange:function(e){return o(e.target.value)}}),Object(u.jsx)("button",{className:"SendMsgBtn",type:"submit",children:Object(u.jsx)("i",{class:"fa fa-paper-plane"})})]})})};var h=function(e){var t=Object(s.useState)([]),a=Object(n.a)(t,2),c=a[0],o=a[1],r=Object(s.useState)(e.lim),i=Object(n.a)(r,2),b=i[0],f=i[1];return Object(s.useEffect)((function(){f(e.lim)}),[e.database]),Object(s.useEffect)((function(){l.collection(e.database).orderBy("createdAt","desc").limit(b).onSnapshot((function(e){o(e.docs.map((function(e){return e.data()})))}))})),Object(u.jsxs)("div",{className:"ChatArea",children:[Object(u.jsxs)("button",{className:"LoadMore",onClick:function(){f(b+2),l.collection(e.database).orderBy("createdAt","desc").limit(b).onSnapshot((function(e){o(e.docs.map((function(e){return e.data()})))}))},children:[Object(u.jsx)("i",{class:"fa fa-spinner","aria-hidden":"true"})," Load More"]}),c.reverse().map((function(e){var t,a=e.idx,s=e.text,c=e.photoURL,o=e.displayName,n=e.email;return Object(u.jsxs)("div",{className:(t=n,t===d.currentUser.email?"self":"other"),children:[Object(u.jsx)("img",{src:c,alt:""}),Object(u.jsx)("h4",{children:o}),Object(u.jsx)("p",{children:s})]},a)})),Object(u.jsx)(y,{database:e.database})]})};var O=function(e){var t=Object(s.useState)(""),a=Object(n.a)(t,2),c=a[0],o=a[1];function i(){return(i=Object(p.a)(m.a.mark((function e(t){var a,s,n,i,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===c){e.next=9;break}return t.preventDefault(),a=d.currentUser,s=a.uid,n=a.photoURL,i=a.email,u=a.displayName,e.next=5,l.collection("Database").add({Room:c});case 5:l.collection(c).add({text:"Welcome to the room",photoURL:n,uid:s,email:i,displayName:u,createdAt:r.a.firestore.FieldValue.serverTimestamp()}),alert(c+" room is created"),o(""),document.getElementById("CRoom").style.display="none";case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=Object(s.useState)(!0),f=Object(n.a)(b,2),j=f[0],y=f[1];return Object(s.useEffect)((function(){""===c||e.list.some((function(e){return e.Room===c}))?y(!0):y(!1)}),[c]),Object(u.jsxs)("div",{className:"CreateRoom",id:"CRoom",onSubmit:function(e){return i.apply(this,arguments)},children:[Object(u.jsx)("button",{onClick:function(){return document.getElementById("CRoom").style.display="none"},children:Object(u.jsx)("i",{class:"fa fa-times"})}),Object(u.jsxs)("form",{children:[Object(u.jsx)("input",{type:"text",value:c,placeholder:"Create Room...",onChange:function(e){return o(e.target.value)}}),Object(u.jsx)("button",{type:"submit",disabled:j,children:"Create"})]})]})};var x=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("button",{className:"SignOutBtn",onClick:function(){d.signOut(),window.location.reload()},children:Object(u.jsx)("i",{class:"fa fa-sign-out"})})})};var v=function(e){var t=Object(s.useState)([{Room:"messages"}]),a=Object(n.a)(t,2),c=a[0],o=a[1],r=Object(s.useState)(c),i=Object(n.a)(r,2),b=i[0],f=i[1],j=Object(s.useState)(c[0].Room),m=Object(n.a)(j,2),p=m[0],y=m[1],v=["#37A163","#7854A1","#41A4C9","#EB5211","#2C7DB2","#DE0077","#6C67AC"];Object(s.useEffect)((function(){}),[p]);var g=d.currentUser,N=g.photoURL,C=(g.email,g.displayName,Object(s.useState)("")),P=Object(n.a)(C,2),R=P[0],S=P[1];Object(s.useEffect)((function(){R.length>0?f(c.filter((function(e){return e.Room.toLowerCase().includes(R.toLowerCase())}))):f(c)}),[R]);var k=Object(s.useState)(!0),A=Object(n.a)(k,2),B=A[0],E=A[1];return Object(s.useEffect)((function(){B?(document.body.style.setProperty("--bg","#ffffff"),document.body.style.setProperty("--bg"," #ffffff"),document.body.style.setProperty("--sidebar"," #4849a1"),document.body.style.setProperty("--left"," #f9f9fc"),document.body.style.setProperty("--heading"," #31324e"),document.body.style.setProperty("--search"," #ffffff"),document.body.style.setProperty("--text-box"," #ffffff"),document.body.style.setProperty("--search-text"," #63636d"),document.body.style.setProperty("--text-light"," #b4b6cb"),document.body.style.setProperty("--roomlist-txt"," #13145c"),document.body.style.setProperty("--chat-self"," #f0f0f6"),document.body.style.setProperty("--btn"," #6364af"),document.body.style.setProperty("--base","#000000")):(document.body.style.setProperty("--bg"," #1B1F22"),document.body.style.setProperty("--sidebar"," #6364AF"),document.body.style.setProperty("--left"," #363940"),document.body.style.setProperty("--heading"," #ffffff"),document.body.style.setProperty("--search"," #363940"),document.body.style.setProperty("--text-box"," #363940"),document.body.style.setProperty("--search-text"," #63636d"),document.body.style.setProperty("--text-light"," #b4b6cb"),document.body.style.setProperty("--roomlist-txt"," #ffffff"),document.body.style.setProperty("--chat-self"," #f0f0f6"),document.body.style.setProperty("--btn"," #7879D5"),document.body.style.setProperty("--base","#ffffff"))}),[B]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(O,{list:c}),Object(u.jsxs)("div",{className:"barleft",children:[Object(u.jsx)("img",{className:"profilePic",src:N,alt:""}),Object(u.jsxs)("div",{className:"bottom",children:[Object(u.jsx)("hr",{}),Object(u.jsx)(x,{}),Object(u.jsx)("button",{className:"darkmode",onClick:function(){return E(!B)},children:Object(u.jsx)("i",{class:"fa fa-moon-o"})})]})]}),Object(u.jsxs)("div",{className:"left",children:[Object(u.jsx)("div",{className:"flex1",children:Object(u.jsx)("h1",{children:"iChating"})}),Object(u.jsx)("input",{type:"text",placeholder:"Search...",className:"search",value:R,onChange:function(e){return S(e.target.value)}}),Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)("h3",{children:"Rooms"}),Object(u.jsx)("button",{className:"refreshRooms",onClick:function(){l.collection("Database").onSnapshot((function(e){o(e.docs.map((function(e){return e.data()}))),f(c)}))},children:Object(u.jsx)("i",{className:"fa fa-refresh"})}),Object(u.jsx)("button",{className:"CrRoom",onClick:function(){return document.getElementById("CRoom").style.display="flex"},children:Object(u.jsx)("i",{class:"fa fa-plus"})})]}),Object(u.jsx)("div",{className:"roomslistbox",children:b.map((function(e,t){return Object(u.jsxs)("div",{className:(a=e.Room,p===a?"roomlist active":"roomlist"),onClick:function(){return y(e.Room)},children:[Object(u.jsx)("div",{className:"name",style:{backgroundColor:v[Math.floor(7*Math.random())]},children:Object(u.jsx)("h3",{children:e.Room[0].toUpperCase()})}),Object(u.jsxs)("h4",{children:[e.Room," "]})]},t);var a}))})]}),Object(u.jsxs)("div",{className:"right",children:[Object(u.jsx)("h1",{children:p}),Object(u.jsx)(h,{database:p,lim:20})]})]})};var g=function(){var e=Object(f.a)(d),t=Object(n.a)(e,1)[0];return Object(u.jsx)(u.Fragment,{children:t?Object(u.jsx)(v,{database:"Database"}):Object(u.jsx)(b,{})})};o.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.7552875a.chunk.js.map